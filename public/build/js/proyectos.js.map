{"version":3,"file":"proyectos.js","names":["paginacion","totalRegistros","totalPaginas","offset","registrosXPaginas","paginaActual","async","consultarRegistros","url","window","location","datos","FormData","append","respuesta","fetch","method","body","resultado","json","mostrarRegistros","registro","funcionPaginacion","btn","btnAnterior","document","querySelector","btnSiguiente","classList","add","remove","registros","paginacionNumeros","innerHTML","numero","createElement","textContent","appendChild","table","forEach","tr","nombre","acciones","confirmar","confirmado","addEventListener","filter","registr","id","estatusProyecto","modal","card","titulo","cerrarModal","namePro","precio","usuario","profesios","user","user_name","apellido","usuario_id","li","profesional","profesio","parseInt","cantidad","Math","ceil","btnPaginacion","count"],"sources":["proyectos.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function() {\r\n    let paginacion = {\r\n        totalRegistros : 0,\r\n        totalPaginas : 0,\r\n        offset : 0,\r\n        registrosXPaginas : 6,\r\n        paginaActual : 1\r\n    }\r\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\r\n    count();\r\n})\r\n\r\nasync function count() {\r\n    const url = `${window.location}/count`;\r\n    const respuesta = await fetch(url);\r\n    const resultado = await respuesta.json();\r\n\r\n    if(resultado.resultado) {\r\n        paginacion.totalRegistros = parseInt(resultado.cantidad);\r\n        paginacion.totalPaginas = Math.ceil((paginacion.totalRegistros / paginacion.registrosXPaginas));\r\n        paginacion.offset = paginacion.registrosXPaginas * (paginacion.paginaActual - 1);\r\n        btnPaginacion();\r\n    }\r\n}\r\n\r\nasync function consultarRegistros() {\r\n    const url = `${window.location}/pages`;\r\n    const datos = new FormData();\r\n    datos.append(\"limit\", paginacion.registrosXPaginas);\r\n    datos.append(\"offset\", paginacion.offset);\r\n\r\n    const respuesta = await fetch(url, {\r\n        method : \"POST\",\r\n        body : datos\r\n    });\r\n    const resultado = await respuesta.json();\r\n    if(resultado.resultado) {\r\n        mostrarRegistros(resultado.registro);\r\n    }\r\n}\r\n\r\nfunction btnPaginacion() {\r\n    const {paginaActual, totalPaginas} = paginacion;\r\n    const btnAnterior = document.querySelector(\".btnAnterior\");\r\n    const btnSiguiente = document.querySelector(\".btnSiguiente\");\r\n    consultarRegistros();\r\n\r\n    btnAnterior.addEventListener(\"click\", ()=>{\r\n        paginacion.paginaActual--;\r\n        funcionPaginacion();\r\n    })\r\n    btnSiguiente.addEventListener(\"click\", ()=>{\r\n        paginacion.paginaActual++;\r\n        funcionPaginacion();\r\n    })   \r\n}\r\n\r\nfunction funcionPaginacion(btn) {\r\n    const {paginaActual, totalPaginas} = paginacion;\r\n    const btnAnterior = document.querySelector(\".btnAnterior\");\r\n    const btnSiguiente = document.querySelector(\".btnSiguiente\");\r\n\r\n    paginacion.offset = paginacion.registrosXPaginas * (paginacion.paginaActual - 1); \r\n\r\n    if(paginaActual <= 1) {\r\n        btnAnterior.classList.add(\"ocultar\");\r\n        btnSiguiente.classList.remove(\"ocultar\");\r\n    }\r\n    else if(paginaActual >= totalPaginas) {\r\n        btnSiguiente.classList.add(\"ocultar\");\r\n        btnAnterior.classList.remove(\"ocultar\");\r\n    }\r\n    else {\r\n        btnAnterior.classList.remove(\"ocultar\");\r\n        btnSiguiente.classList.remove(\"ocultar\");\r\n    }\r\n    consultarRegistros();\r\n}\r\n\r\nfunction mostrarRegistros(registros) {\r\n    const paginacionNumeros = document.querySelector(\".paginacion__numeros\");\r\n    paginacionNumeros.innerHTML = \"\";\r\n\r\n    const numero = document.createElement(\"P\");\r\n    numero.textContent = paginacion.paginaActual;\r\n    paginacionNumeros.appendChild(numero);\r\n\r\n    const table = document.querySelector(\"tbody\");\r\n    table.innerHTML = \"\";\r\n\r\n    registros.forEach((registro)=>{\r\n        const tr = document.createElement(\"TR\");\r\n\r\n        const nombre = document.createElement(\"TD\");\r\n        nombre.classList.add(\"name\");\r\n        nombre.textContent = registro.nombre\r\n\r\n        const acciones = document.createElement(\"TD\");\r\n\r\n        const confirmar = document.createElement(\"P\");\r\n        if(registro.confirmado == 0) {\r\n            confirmar.textContent = \"No Confirmado\";\r\n            confirmar.classList.add(\"confirmar\");\r\n        } else {\r\n            confirmar.textContent = \"Confirmado\";\r\n            confirmar.classList.add(\"notconfirmar\");\r\n        }\r\n        \r\n        acciones.appendChild(confirmar);\r\n        tr.appendChild(nombre);\r\n        tr.appendChild(acciones);\r\n        table.appendChild(tr);\r\n\r\n        confirmar.addEventListener(\"click\", ()=>{\r\n            if(registro.confirmado == 0) {\r\n                registros.filter(registr => registr.id == registro.id)[0].confirmado = 1;\r\n                estatusProyecto(registro.id);\r\n                mostrarRegistros(registros);\r\n            } else {\r\n                registros.filter(registr => registr.id == registro.id)[0].confirmado = 0;\r\n                estatusProyecto(registro.id);\r\n                mostrarRegistros(registros);\r\n            }\r\n        })\r\n        \r\n        nombre.addEventListener(\"click\", ()=>{\r\n            modal(registro);\r\n        })\r\n    })\r\n}\r\n\r\nasync function estatusProyecto(id) {\r\n    const url = `${window.location}/confirmar`;\r\n    const datos = new FormData();\r\n    datos.append(\"proyecto_id\", id);\r\n\r\n    const respuesta = await fetch(url, {\r\n        method : \"POST\",\r\n        body : datos\r\n    });\r\n    const resultado = await respuesta.json();\r\n}\r\n\r\nfunction modal(registro) {\r\n    const body = document.querySelector(\"body\");\r\n    const modal = document.createElement(\"DIV\");\r\n    modal.classList.add(\"modal\");\r\n\r\n    const card = document.createElement(\"DIV\");\r\n    card.classList.add(\"card\");\r\n\r\n    const titulo = document.createElement(\"DIV\");\r\n    titulo.classList.add(\"titulo\");\r\n\r\n    const cerrarModal = document.createElement(\"I\");\r\n    cerrarModal.classList.add(\"fa-solid\")\r\n    cerrarModal.classList.add(\"fa-x\")\r\n\r\n    const namePro = document.createElement(\"P\");\r\n    namePro.classList.add(\"name\");\r\n    namePro.textContent = `${registro.nombre}`;\r\n\r\n    const precio = document.createElement(\"P\");\r\n    precio.classList.add(\"precio\");\r\n    precio.textContent = `Precio: ${registro.precio}$`;\r\n\r\n    const usuario = document.createElement(\"P\");\r\n    usuario.classList.add(\"user_name\");\r\n\r\n    const profesios = document.createElement(\"ul\");\r\n    profesios.classList.add(\"profesios\");\r\n\r\n    titulo.appendChild(namePro);\r\n    titulo.appendChild(cerrarModal);\r\n    card.appendChild(titulo);\r\n    card.appendChild(usuario);\r\n    card.appendChild(precio);\r\n    card.appendChild(profesios);\r\n    modal.appendChild(card);\r\n    body.appendChild(modal);\r\n\r\n    user(registro.usuario_id);\r\n    profesio(registro.id);\r\n\r\n    cerrarModal.addEventListener(\"click\", () => {\r\n        modal.remove();\r\n    })\r\n}\r\n\r\nasync function user(user) {\r\n    const user_name = document.querySelector(\".user_name\");\r\n    const url = `${window.location}/user`;\r\n    const datos = new FormData();\r\n    datos.append(\"usuario_id\", user);\r\n\r\n    const respuesta = await fetch(url, {\r\n        method : \"POST\",\r\n        body : datos\r\n    });\r\n    const resultado = await respuesta.json();\r\n    if(resultado.resultado) {\r\n        user_name.textContent = `Cliente: ${resultado.registro.nombre} ${resultado.registro.apellido}`;\r\n    }\r\n}\r\n\r\nasync function profesio(id) {\r\n    const profesios = document.querySelector(\".profesios\");\r\n    const url = `${window.location}/profesios`;\r\n    const datos = new FormData();\r\n    datos.append(\"id\", id);\r\n\r\n    const respuesta = await fetch(url, {\r\n        method : \"POST\",\r\n        body : datos\r\n    });\r\n    const resultado = await respuesta.json();\r\n    if(resultado.resultado) {\r\n        const li = document.createElement(\"P\");\r\n        li.textContent = `Encargado a:`;\r\n        profesios.appendChild(li);\r\n        resultado.registro.forEach(profesional => {\r\n            const profesio = document.createElement(\"LI\");\r\n            profesio.textContent = `${profesional.registro.nombre} ${profesional.registro.apellido}`;\r\n            profesios.appendChild(profesio);\r\n        })\r\n    }\r\n}\r\n})();"]}