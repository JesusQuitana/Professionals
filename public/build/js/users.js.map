{"version":3,"file":"users.js","names":["paginacion","totalRegistros","totalPaginas","offset","registrosXPaginas","paginaActual","async","consultarRegistros","url","window","location","datos","FormData","append","respuesta","fetch","method","body","resultado","json","registros","paginacionNumeros","document","querySelector","innerHTML","numero","createElement","textContent","appendChild","table","forEach","registro","tr","nombre","ubicacion","acciones","editar","setAttribute","id","classList","add","eliminar","addEventListener","Swal","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","onmouseenter","stopTimer","onmouseleave","resumeTimer","fire","icon","title","mensaje","error","eliminarProfesional","mostrarRegistros","funcionPaginacion","btn","btnAnterior","btnSiguiente","remove","e","parseInt","cantidad","Math","ceil","btnPaginacion","count"],"sources":["users.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function() {\r\n    let paginacion = {\r\n        totalRegistros : 0,\r\n        totalPaginas : 0,\r\n        offset : 0,\r\n        registrosXPaginas : 6,\r\n        paginaActual : 1\r\n    }\r\ndocument.addEventListener(\"DOMContentLoaded\", (e)=>{\r\n    count();\r\n})\r\n\r\nasync function count() {\r\n    const url = `${window.location}/users/count`;\r\n    const respuesta = await fetch(url);\r\n    const resultado = await respuesta.json();\r\n\r\n    if(resultado.resultado) {\r\n        paginacion.totalRegistros = parseInt(resultado.cantidad);\r\n        paginacion.totalPaginas = Math.ceil((paginacion.totalRegistros / paginacion.registrosXPaginas));\r\n        paginacion.offset = paginacion.registrosXPaginas * (paginacion.paginaActual - 1);\r\n        btnPaginacion();\r\n    }\r\n}\r\n\r\nasync function consultarRegistros() {\r\n    const url = `${window.location}/users/pages`;\r\n    const datos = new FormData();\r\n    datos.append(\"limit\", paginacion.registrosXPaginas);\r\n    datos.append(\"offset\", paginacion.offset);\r\n\r\n    const respuesta = await fetch(url, {\r\n        method : \"POST\",\r\n        body : datos\r\n    });\r\n    const resultado = await respuesta.json();\r\n    if(resultado.resultado) {\r\n        mostrarRegistros(resultado.registro);\r\n    }\r\n}\r\n\r\nfunction btnPaginacion() {\r\n    const {paginaActual, totalPaginas} = paginacion;\r\n    const btnAnterior = document.querySelector(\".btnAnterior\");\r\n    const btnSiguiente = document.querySelector(\".btnSiguiente\");\r\n    consultarRegistros();\r\n\r\n    btnAnterior.addEventListener(\"click\", ()=>{\r\n        paginacion.paginaActual--;\r\n        funcionPaginacion();\r\n    })\r\n    btnSiguiente.addEventListener(\"click\", ()=>{\r\n        paginacion.paginaActual++;\r\n        funcionPaginacion();\r\n    })   \r\n}\r\n\r\nfunction funcionPaginacion(btn) {\r\n    const {paginaActual, totalPaginas} = paginacion;\r\n    const btnAnterior = document.querySelector(\".btnAnterior\");\r\n    const btnSiguiente = document.querySelector(\".btnSiguiente\");\r\n\r\n    paginacion.offset = paginacion.registrosXPaginas * (paginacion.paginaActual - 1); \r\n\r\n    if(paginaActual <= 1) {\r\n        btnAnterior.classList.add(\"ocultar\");\r\n        btnSiguiente.classList.remove(\"ocultar\");\r\n    }\r\n    else if(paginaActual >= totalPaginas) {\r\n        btnSiguiente.classList.add(\"ocultar\");\r\n        btnAnterior.classList.remove(\"ocultar\");\r\n    }\r\n    else {\r\n        btnAnterior.classList.remove(\"ocultar\");\r\n        btnSiguiente.classList.remove(\"ocultar\");\r\n    }\r\n    consultarRegistros();\r\n}\r\n\r\nfunction mostrarRegistros(registros) {\r\n    const paginacionNumeros = document.querySelector(\".paginacion__numeros\");\r\n    paginacionNumeros.innerHTML = \"\";\r\n\r\n    const numero = document.createElement(\"P\");\r\n    numero.textContent = paginacion.paginaActual;\r\n    paginacionNumeros.appendChild(numero);\r\n\r\n    const table = document.querySelector(\"tbody\");\r\n    table.innerHTML = \"\";\r\n\r\n    registros.forEach((registro)=>{\r\n        const tr = document.createElement(\"TR\");\r\n\r\n        const nombre = document.createElement(\"TD\");\r\n        nombre.textContent = registro.nombre;\r\n\r\n        const ubicacion = document.createElement(\"TD\");\r\n        ubicacion.textContent = registro.ubicacion;\r\n\r\n        const acciones = document.createElement(\"TD\");\r\n        const editar = document.createElement(\"A\");\r\n        editar.setAttribute(\"href\", `/usuarios/editar?p=${registro.id}`)\r\n        editar.classList.add(\"ver\");\r\n        editar.textContent = \"Ver\";\r\n\r\n        const eliminar = document.createElement(\"P\");\r\n        eliminar.classList.add(\"eliminar\");\r\n        eliminar.textContent = \"Eliminar\";\r\n        \r\n        acciones.appendChild(editar);\r\n        acciones.appendChild(eliminar);\r\n        tr.appendChild(nombre);\r\n        tr.appendChild(ubicacion);\r\n        tr.appendChild(acciones);\r\n        table.appendChild(tr);\r\n\r\n        eliminar.addEventListener(\"click\", ()=>{\r\n            eliminarProfesional(registro);\r\n        })\r\n    })\r\n}\r\n\r\nasync function eliminarProfesional(registro) {\r\n    const url = `${window.location}/users/editar`;\r\n    const datos = new FormData();\r\n    datos.append(\"id\", registro.id)\r\n    const respuesta = await fetch(url, {\r\n        method : \"POST\",\r\n        body : datos\r\n    });\r\n    const resultado = await respuesta.json();\r\n\r\n    if(resultado.resultado) {\r\n        consultarRegistros();\r\n        const Toast = Swal.mixin({\r\n            toast: true,\r\n            position: \"top-end\",\r\n            showConfirmButton: false,\r\n            timer: 3000,\r\n            timerProgressBar: true,\r\n            didOpen: (toast) => {\r\n                toast.onmouseenter = Swal.stopTimer;\r\n                toast.onmouseleave = Swal.resumeTimer;\r\n            }\r\n            });\r\n            Toast.fire({\r\n            icon: \"success\",\r\n            title: `${resultado.mensaje}`\r\n            });\r\n    } else {\r\n        const Toast = Swal.mixin({\r\n            toast: true,\r\n            position: \"top-end\",\r\n            showConfirmButton: false,\r\n            timer: 3000,\r\n            timerProgressBar: true,\r\n            didOpen: (toast) => {\r\n                toast.onmouseenter = Swal.stopTimer;\r\n                toast.onmouseleave = Swal.resumeTimer;\r\n            }\r\n            });\r\n            Toast.fire({\r\n            icon: \"error\",\r\n            title: `${resultado.error}`\r\n            });\r\n    }\r\n}\r\n})();"]}