{"version":3,"file":"confirmarToken.js","names":["document","addEventListener","input","querySelector","e","target","value","length","slice","innerHTML","async","token","url","window","location","origin","datos","FormData","append","respuesta","fetch","method","body","resultado","json","loading","limpiarInputs","Swal","mixin","toast","position","showConfirmButton","timer","timerProgressBar","color","didOpen","onmouseenter","stopTimer","onmouseleave","resumeTimer","fire","icon","title","mensaje","setTimeout","href","error","validarToken","verificarInput"],"sources":["confirmarToken.js"],"mappings":"AACAA,SAASC,iBAAiB,oBAAoB,YAI9C,WACI,MAAMC,EAAQF,SAASG,cAAc,UACrCD,EAAMD,iBAAiB,SAAUG,IAC1BA,EAAEC,OAAOC,MAAMC,OAAS,EACvBL,EAAMI,MAAQF,EAAEC,OAAOC,MAAME,MAAM,EAAG,GACP,GAAzBJ,EAAEC,OAAOC,MAAMC,SACrBP,SAASG,cAAc,wBAAwBM,UAAY,8CAavEC,eAA4BC,GACxB,MAAMC,EAAM,GAAGC,OAAOC,SAASC,mBACzBC,EAAQ,IAAIC,SAClBD,EAAME,OAAO,QAASP,GAEtB,MAAMQ,QAAkBC,MAAMR,EAAK,CAC/BS,OAAS,OACTC,KAAON,IAELO,QAAkBJ,EAAUK,OAE/BD,EAAUA,YAlBjB,WACI,MAAMrB,EAAQF,SAASG,cAAc,UAC/BsB,EAAUzB,SAASG,cAAc,wBACvCD,EAAMI,MAAQ,GACdmB,EAAQhB,UAAY,EACxB,CAcQiB,GACcC,KAAKC,MAAM,CACrBC,OAAO,EACPC,SAAU,UACVC,mBAAmB,EACnBC,MAAO,IACPC,kBAAkB,EAClBC,MAAO,OACPC,QAAUN,IACNA,EAAMO,aAAeT,KAAKU,UAC1BR,EAAMS,aAAeX,KAAKY,WAAW,IAGvCC,KAAK,CACPC,KAAM,UACNC,MAAO,6BAA6BnB,EAAUoB,8EAElDC,YAAW,KACP/B,OAAOC,SAAS+B,KAAOhC,OAAOC,SAASC,MAAM,GAC/C,MAGYY,KAAKC,MAAM,CACrBC,OAAO,EACPC,SAAU,UACVC,mBAAmB,EACnBC,MAAO,IACPC,kBAAkB,EAClBC,MAAO,OACPC,QAAUN,IACNA,EAAMO,aAAeT,KAAKU,UAC1BR,EAAMS,aAAeX,KAAKY,WAAW,IAGvCC,KAAK,CACPC,KAAM,QACNC,MAAO,6BAA6BnB,EAAUuB,gBAG1D,CA/DYC,CAAa3C,EAAEC,OAAOC,OAC1B,GAER,CAbI0C,EACJ","ignoreList":[],"sourcesContent":["(function() {\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n    verificarInput();\r\n})\r\n\r\nfunction verificarInput() {\r\n    const input = document.querySelector(\"#token\");\r\n    input.addEventListener(\"input\", (e)=>{\r\n        if(e.target.value.length > 6) {\r\n            input.value = e.target.value.slice(0, 6);\r\n        } else if(e.target.value.length == 6) {\r\n            document.querySelector(\".formulario__loading\").innerHTML = `<i class=\"fa-solid fa-spinner fa-spin\"></i>`;\r\n            validarToken(e.target.value);\r\n        }\r\n    })\r\n}\r\n\r\nfunction limpiarInputs() {\r\n    const input = document.querySelector(\"#token\");\r\n    const loading = document.querySelector(\".formulario__loading\");\r\n    input.value = \"\";\r\n    loading.innerHTML = \"\";\r\n}\r\n\r\nasync function validarToken(token) {\r\n    const url = `${window.location.origin}/confirmar`;\r\n    const datos = new FormData();\r\n    datos.append(\"token\", token);\r\n\r\n    const respuesta = await fetch(url, {\r\n        method : \"POST\",\r\n        body : datos\r\n    });\r\n    const resultado = await respuesta.json();\r\n\r\n    if(resultado.resultado) {\r\n        limpiarInputs();\r\n        const Toast = Swal.mixin({\r\n            toast: true,\r\n            position: \"top-end\",\r\n            showConfirmButton: false,\r\n            timer: 2000,\r\n            timerProgressBar: true,\r\n            color: \"#000\",\r\n            didOpen: (toast) => {\r\n                toast.onmouseenter = Swal.stopTimer;\r\n                toast.onmouseleave = Swal.resumeTimer;\r\n            }\r\n        });\r\n        Toast.fire({\r\n            icon: \"success\",\r\n            title: `<span style='color: #000'>${resultado.mensaje} (Redirigiendo <i class=\"fa-solid fa-spinner fa-spin\"></i>)</span>`\r\n        });\r\n        setTimeout(()=>{\r\n            window.location.href = window.location.origin;\r\n        },2000)\r\n    }\r\n    else {\r\n        const Toast = Swal.mixin({\r\n            toast: true,\r\n            position: \"top-end\",\r\n            showConfirmButton: false,\r\n            timer: 3000,\r\n            timerProgressBar: true,\r\n            color: \"#000\",\r\n            didOpen: (toast) => {\r\n                toast.onmouseenter = Swal.stopTimer;\r\n                toast.onmouseleave = Swal.resumeTimer;\r\n            }\r\n        });\r\n        Toast.fire({\r\n            icon: \"error\",\r\n            title: `<span style='color: #000'>${resultado.error}</span>`\r\n        });\r\n    }\r\n}\r\n})();"]}